**üß© Architecture Overview**

This Proof of Concept demonstrates an end-to-end AI-driven shopping experience built using MCP UI, OpenAI, and a Remote DOM rendering pipeline.
The system dynamically generates UI layouts and product results using an LLM, then renders them safely inside a React application.


**Core Components**

**1. MCP UI Client (@mcp-ui/client)**

The MCP UI Client is used inside the React application to render UI that is generated dynamically by the server.
Key features:

Renders UI Resources using <UIResourceRenderer />

Supports Remote DOM, where DOM nodes are defined by the server or LLM

Maps custom remote DOM elements (e.g., <shop-card>, <shop-text>, <shop-img>) to React components

Handles remote events using onUIAction (e.g., addToCart, removeFromCart)

This allows complex UI to be constructed at runtime without shipping UI code from server to client.


**2. MCP UI Server (@mcp-ui/server)**

The backend uses MCP UI Server utilities to create UI resources that the frontend can render.
Responsibilities:

Wrap generated Remote DOM scripts using createUIResource()

Provide consistent encoding and metadata

Integrate seamlessly with the MCP UI Client

The server does not send HTML‚Äîit sends instructions that the frontend renders through the Remote DOM layer.


**üåê Remote DOM**

Remote DOM is the foundation of the dynamic UI.
Instead of sending HTML or JSX, the server (and LLM) sends a JavaScript script that executes inside a sandboxed environment and constructs a virtual DOM tree using custom elements like:

<shop-card>

<shop-text>

<shop-small-text>

<shop-img>

<shop-badge>

<shop-grid>

Each element corresponds to a React component implemented in a Remote DOM Component Library.

Event handlers inside the script dispatch CustomEvents, which the client maps to onUIAction events for the React app to respond to.

This enables fully generated UI layouts such as product search results, cart pages, etc.

**ü§ñ OpenAI Integration**

OpenAI is used in two main ways:

**A. Product generation**

OpenAI synthesizes realistic product datasets:

name
description
price
currency
imageUrl
tags
These products are inserted into Postgres & Chroma so future searches use semantic retrieval.

**B. Remote DOM UI generation**

OpenAI generates the JavaScript Remote DOM script that describes how the UI should look for:

search results page

cart page

wishlist page

This script is cached in Postgres to avoid repeated LLM calls.

The system combines:

LLM reasoning ‚Üí UI layout

LLM creativity ‚Üí product generation

deterministic business logic ‚Üí cart/wishlist updates

**üóÑÔ∏è PostgreSQL**

Postgres serves as the core persistent storage layer.
Tables include:

products

Stores all product metadata generated by OpenAI or searched via vector store.

cart_items & wishlist_items

Maintain user-specific shopping state:

products in cart

quantity

wishlist items

originating search prompt

remote_dom_cache

Caches LLM-generated remote DOM scripts so the UI does not require repeated calls to OpenAI.

Postgres ensures consistency, uniqueness, and structural integrity of the data model.


**üöÄ End-to-End Flow Summary**

User searches ‚Üí React app calls /search

OpenAI generates new products

Server requests OpenAI to create a Remote DOM script

Script is cached in Postgres

Server returns a UIResource

React renders it using MCP UI Client + Remote DOM library

User actions (add/remove) trigger remote events

Server updates Postgres accordingly

Cart/Wishlist screens are also generated by LLM Remote DOM
